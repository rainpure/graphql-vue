webpackJsonp([1],{10:function(t,a,e){e(12);var n=e(8)(e(30),e(36),null,null);t.exports=n.exports},12:function(t,a){},2:function(t,a,e){"use strict";var n,n="http://192.168.1.23:8080";console.warn("当前resource: ",n);var s={host:n,graphQlApi:n+"/graphql"};a.a=s},30:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e(35),s=e.n(n);a.default={name:"app",components:{PostList:s.a}}},31:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e(2);a.default={data:function(){return{posts:[],author:{},addParams:{title:"",digest:"",author:""}}},methods:{getPosts:function(){var t=this;this.$ajax.post(""+n.a.graphQlApi,{query:"\nquery {\n\tposts {\n\t\tid\n\t\ttitle\n\t\tagree\n\t\tdigest\n\t\timg\n\t\tauthor {\n\t\t\tid\n\t\t\tfirstName\n\t\t}\n\t}\n}"}).then(function(a){t.posts=a.data.data.posts.slice().sort(function(t,a){return a.agree-t.agree})})},addPost:function(){var t=this;this.$ajax.post(""+n.a.graphQlApi,{query:"\nmutation addPost(\n\t$title: String!\n\t$digest: String\n\t$author: String\n) {\n\taddPost(\n\t\ttitle: $title\n\t\tdigest: $digest\n\t\tauthor: $author\n\t) {\n\t\tid\n\t\ttitle\n\t\tdigest\n\t\tauthor {\n\t\t\tfirstName\n\t\t}\n\t}\n}",variables:{title:t.addParams.title,digest:t.addParams.digest,author:t.addParams.author}}).then(function(a){t.getPosts()})},upvote:function(t){var a=this;this.$ajax.post(""+n.a.graphQlApi,{query:"\nmutation upvotePost($postId: Int!) {\n\tupvotePost(postId: $postId) {\n\t\tid\n\t\tagree\n\t}\n}\n",variables:{postId:t}}).then(function(t){a.getPosts()})},getAuthor:function(t){var a=this;this.$ajax.post(""+n.a.graphQlApi,{query:"\nquery ($id: Int!) {\n\tauthor(id: $id) {\n\t\tid\n\t\tfirstName\n\t}\n}\n",variables:{id:t}}).then(function(t){a.author=t.data.data.author})}},mounted:function(){this.getPosts()}}},32:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e(11),s=e(10),i=e.n(s),o=(e(2),e(9)),r=e.n(o);n.a.prototype.$ajax=r.a,new n.a({el:"#app",render:function(t){return t(i.a)}})},35:function(t,a,e){var n=e(8)(e(31),e(37),null,null);t.exports=n.exports},36:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"app"},[e("post-list")],1)},staticRenderFns:[]}},37:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"post-list"},[e("div",{staticClass:"add-book-form"},[e("p",[t._v("标题："),e("input",{directives:[{name:"model",rawName:"v-model",value:t.addParams.title,expression:"addParams.title"}],attrs:{type:"text"},domProps:{value:t.addParams.title},on:{input:function(a){a.target.composing||(t.addParams.title=a.target.value)}}})]),t._v(" "),e("p",[t._v("作者："),e("input",{directives:[{name:"model",rawName:"v-model",value:t.addParams.author,expression:"addParams.author"}],attrs:{type:"text"},domProps:{value:t.addParams.author},on:{input:function(a){a.target.composing||(t.addParams.author=a.target.value)}}})]),t._v(" "),e("p",[t._v("摘要："),e("input",{directives:[{name:"model",rawName:"v-model",value:t.addParams.digest,expression:"addParams.digest"}],attrs:{type:"text"},domProps:{value:t.addParams.digest},on:{input:function(a){a.target.composing||(t.addParams.digest=a.target.value)}}})]),t._v(" "),e("button",{staticClass:"button button--mini",on:{click:function(a){t.addPost()}}},[t._v("添加参赛作品")])]),t._v(" "),e("ul",{staticClass:"book-list"},t._l(t.posts,function(a){return e("li",{key:a.id,staticClass:"card book-item"},[e("img",{staticClass:"book-cover",attrs:{src:a.img}}),t._v(" "),e("div",{staticClass:"book-info"},[e("p",[t._v(t._s(a.title))]),t._v(" "),e("p",{staticClass:"author"},[t._v(" "+t._s(a.author.firstName))]),t._v(" "),e("p",{staticClass:"digest"},[t._v("“"+t._s(a.digest)+"”")]),t._v(" "),e("span",{staticClass:"vote"},[t._v("获得票数："+t._s(a.agree))]),t._v(" "),e("button",{staticClass:"button button--mini vote-btn",on:{click:function(e){t.upvote(a.id)}}},[t._v("投票")])])])})),t._v(" "),e("button",{staticClass:"button button--mini",on:{click:function(a){t.getAuthor(1)}}},[t._v("获取author: "+t._s(t.author)+" ")])])},staticRenderFns:[]}}},[32]);
//# sourceMappingURL=app.e1b6446e4d934f5c38b4.js.map